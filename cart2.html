<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - E-Commerce</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: #f5f5f5; }
        header { background: #2c3e50; color: white; padding: 1rem 0; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        nav { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 2rem; }
        .logo { font-size: 1.5rem; font-weight: bold; cursor: pointer; }
        .cart-icon { position: relative; cursor: pointer; }
        .cart-count { position: absolute; top: -8px; right: -8px; background: #e74c3c; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: bold; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 2rem; }
        .cart-header { background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .cart-header h1 { color: #2c3e50; margin-bottom: 0.5rem; }
        .cart-content { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; }
        .cart-items { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .cart-item { display: grid; grid-template-columns: 100px 1fr auto; gap: 1.5rem; padding: 1.5rem; border-bottom: 1px solid #eee; align-items: center; }
        .cart-item:last-child { border-bottom: none; }
        .cart-item-image { width: 100px; height: 100px; object-fit: cover; border-radius: 8px; }
        .cart-item-details h3 { color: #2c3e50; margin-bottom: 0.5rem; }
        .cart-item-details p { color: #7f8c8d; font-size: 0.9rem; margin-bottom: 0.25rem; }
        .cart-item-price { font-size: 1.2rem; color: #e74c3c; font-weight: bold; }
        .cart-item-actions { display: flex; flex-direction: column; gap: 1rem; align-items: flex-end; }
        .quantity-controls { display: flex; border: 2px solid #ddd; border-radius: 5px; overflow: hidden; }
        .quantity-btn { padding: 0.5rem 1rem; background: white; border: none; cursor: pointer; font-size: 1rem; transition: background 0.3s; min-width: 35px; }
        .quantity-btn:hover { background: #ecf0f1; }
        .quantity-display { padding: 0.5rem 1rem; border-left: 1px solid #ddd; border-right: 1px solid #ddd; min-width: 50px; text-align: center; }
        .remove-btn { background: #e74c3c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem; }
        .remove-btn:hover { background: #c0392b; transform: scale(1.05); }
        .cart-summary { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); height: fit-content; position: sticky; top: 100px; }
        .cart-summary h2 { color: #2c3e50; margin-bottom: 1.5rem; }
        .summary-row { display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #eee; }
        .summary-row.total { border-top: 2px solid #2c3e50; border-bottom: none; font-size: 1.3rem; font-weight: bold; color: #2c3e50; margin-top: 1rem; padding-top: 1rem; }
        .checkout-btn { width: 100%; background: #27ae60; color: white; border: none; padding: 1rem; border-radius: 5px; font-size: 1.1rem; cursor: pointer; margin-top: 1rem; transition: all 0.3s; font-weight: bold; }
        .checkout-btn:hover:not(:disabled) { background: #229954; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .checkout-btn:disabled { background: #95a5a6; cursor: not-allowed; }
        .continue-shopping { width: 100%; background: white; color: #3498db; border: 2px solid #3498db; padding: 1rem; border-radius: 5px; font-size: 1rem; cursor: pointer; margin-top: 1rem; transition: all 0.3s; font-weight: bold; }
        .continue-shopping:hover { background: #3498db; color: white; }
        .empty-cart { text-align: center; padding: 4rem 2rem; }
        .empty-cart h2 { color: #7f8c8d; margin-bottom: 1rem; }
        .empty-cart p { color: #95a5a6; margin-bottom: 2rem; }
        .success-message { position: fixed; top: 100px; right: 20px; background: #27ae60; color: white; padding: 1rem 2rem; border-radius: 5px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); display: none; animation: slideIn 0.3s ease; z-index: 1000; }
        @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @media (max-width: 968px) {
            .cart-content { grid-template-columns: 1fr; }
            .cart-summary { position: static; }
            .cart-item { grid-template-columns: 80px 1fr; gap: 1rem; }
            .cart-item-actions { grid-column: 1 / -1; flex-direction: row; justify-content: space-between; align-items: center; }
            nav { padding: 0 1rem; }
            .container { padding: 0 1rem; }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" onclick="window.location.href='index.html'">E-Commerce Store</div>
            <div class="cart-icon" onclick="window.location.href='cart.html'">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span class="cart-count" id="cart-count">0</span>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="cart-header">
            <h1>Shopping Cart</h1>
            <p id="item-count">0 items</p>
        </div>

        <div id="cart-content-container"></div>
    </div>

    <div class="success-message" id="success-message"></div>

    <script>
        let cart = [];

        function loadCart() {
            cart = JSON.parse(localStorage.getItem('cart') || '[]');
            updateCartDisplay();
            updateCartCount();
        }

        function updateCartDisplay() {
            const container = document.getElementById('cart-content-container');
            const itemCount = document.getElementById('item-count');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            itemCount.textContent = `${totalItems} item${totalItems !== 1 ? 's' : ''}`;

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="cart-items">
                        <div class="empty-cart">
                            <h2>Your cart is empty</h2>
                            <p>Add some products to get started!</p>
                            <button class="continue-shopping" onclick="window.location.href='index.html'">
                                Continue Shopping
                            </button>
                        </div>
                    </div>
                `;
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * 0.1;
            const total = subtotal + tax;

            container.innerHTML = `
                <div class="cart-content">
                    <div class="cart-items">
                        ${cart.map((item, index) => `
                            <div class="cart-item">
                                <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                                <div class="cart-item-details">
                                    <h3>${item.name}</h3>
                                    <p>Color: ${item.color}</p>
                                    <p>Size: ${item.size}</p>
                                    <p class="cart-item-price">$${item.price.toFixed(2)} each</p>
                                </div>
                                <div class="cart-item-actions">
                                    <div class="quantity-controls">
                                        <button class="quantity-btn" onclick="updateQuantity(${index}, -1)">âˆ’</button>
                                        <div class="quantity-display">${item.quantity}</div>
                                        <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                                    </div>
                                    <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="cart-summary">
                        <h2>Order Summary</h2>
                        <div class="summary-row">
                            <span>Subtotal (${totalItems} items)</span>
                            <span>$${subtotal.toFixed(2)}</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax (10%)</span>
                            <span>$${tax.toFixed(2)}</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span>$${total.toFixed(2)}</span>
                        </div>
                        <button class="checkout-btn" onclick="proceedToCheckout()" ${cart.length === 0 ? 'disabled' : ''}>
                            Proceed to Checkout
                        </button>
                        <button class="continue-shopping" onclick="window.location.href='index.html'">
                            Continue Shopping
                        </button>
                    </div>
                </div>
            `;
        }

        function updateQuantity(index, change) {
            if (cart[index].quantity + change < 1) {
                return;
            }
            
            cart[index].quantity += change;
            
            if (cart[index].quantity === 0) {
                cart.splice(index, 1);
            }
            
            saveCart();
            updateCartDisplay();
            updateCartCount();
            showMessage('Cart updated');
        }

        function removeItem(index) {
            const itemName = cart[index].name;
            cart.splice(index, 1);
            saveCart();
            updateCartDisplay();
            updateCartCount();
            showMessage(`${itemName} removed from cart`);
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            alert('Proceeding to checkout...\n\nIn a real application, this would redirect to the checkout page.');
        }

        function showMessage(text) {
            const message = document.getElementById('success-message');
            message.textContent = text;
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 2000);
        }

        // Initialize on page load
        loadCart();

        // Listen for storage changes from other tabs
        window.addEventListener('storage', (e) => {
            if (e.key === 'cart') {
                loadCart();
            }
        });
    </script>
</body>
</html>
