<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="E-Commerce Store - Shop the latest products">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    
    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="max-age=31536000, public">
    
    <title>E-Commerce Store - Home</title>
    
    <!-- Critical CSS - Inlined for faster initial render -->
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;color:#333}header{background:#2c3e50;color:#fff;padding:1rem 0;position:sticky;top:0;z-index:100;box-shadow:0 2px 5px rgba(0,0,0,.1)}nav{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:0 2rem}.logo{font-size:1.5rem;font-weight:700;cursor:pointer}.nav-links{display:flex;gap:2rem;list-style:none}.nav-links a{color:#fff;text-decoration:none;transition:color .3s}.nav-links a:hover{color:#3498db}.cart-icon{position:relative;cursor:pointer}.cart-count{position:absolute;top:-8px;right:-8px;background:#e74c3c;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700}.hero{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:4rem 2rem;text-align:center}.hero h1{font-size:3rem;margin-bottom:1rem}.hero p{font-size:1.2rem;margin-bottom:2rem}.cta-btn{background:#fff;color:#667eea;padding:1rem 2rem;border:none;border-radius:5px;font-size:1.1rem;cursor:pointer;transition:all .3s;font-weight:700}.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.2)}.container{max-width:1200px;margin:2rem auto;padding:0 2rem}.section-title{text-align:center;font-size:2rem;margin-bottom:2rem;color:#2c3e50}.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem;margin-bottom:3rem}.product-card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 4px 8px rgba(0,0,0,.1);transition:all .3s;cursor:pointer}.product-card:hover{transform:translateY(-5px);box-shadow:0 8px 16px rgba(0,0,0,.2)}.product-image{width:100%;height:280px;object-fit:cover;background:#f5f5f5}.product-info{padding:1.5rem}.product-name{font-size:1.2rem;margin-bottom:.5rem;color:#2c3e50}.product-price{font-size:1.5rem;color:#e74c3c;font-weight:700;margin-bottom:1rem}.product-description{color:#7f8c8d;font-size:.9rem;margin-bottom:1rem}.add-to-cart-btn{width:100%;background:#3498db;color:#fff;border:none;padding:.75rem;border-radius:5px;cursor:pointer;transition:all .3s;font-weight:600}.add-to-cart-btn:hover{background:#2980b9}footer{background:#2c3e50;color:#fff;text-align:center;padding:2rem 0;margin-top:3rem}@media (max-width:768px){.hero h1{font-size:2rem}.products-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}.nav-links{display:none}}
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" onclick="window.location.href='index.html'">E-Commerce Store</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="auth.html">Login</a></li>
            </ul>
            <div class="cart-icon" onclick="window.location.href='cart.html'">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span class="cart-count" id="cart-count">0</span>
            </div>
        </nav>
    </header>

    <section class="hero">
        <h1>Welcome to Our Store</h1>
        <p>Discover amazing products at great prices</p>
        <button class="cta-btn" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">
            Shop Now
        </button>
    </section>

    <div class="container">
        <h2 class="section-title" id="products">Featured Products</h2>
        <div class="products-grid" id="products-grid">
            <!-- Products will be loaded here -->
        </div>
    </div>

    <footer>
        <p>&copy; 2024 E-Commerce Store. All rights reserved.</p>
    </footer>

    <!-- Firebase SDK - Deferred loading -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        // Product data
        const products = [
            {
                id: 1,
                name: 'Premium Wireless Headphones',
                price: 299.99,
                description: 'High-quality sound with noise cancellation',
                image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600&h=600&fit=crop&auto=format&q=80'
            },
            {
                id: 2,
                name: 'Smart Watch Pro',
                price: 399.99,
                description: 'Track your fitness and stay connected',
                image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=600&h=600&fit=crop&auto=format&q=80'
            },
            {
                id: 3,
                name: 'Wireless Earbuds',
                price: 149.99,
                description: 'Compact design with powerful sound',
                image: 'https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=600&h=600&fit=crop&auto=format&q=80'
            },
            {
                id: 4,
                name: 'Laptop Stand',
                price: 49.99,
                description: 'Ergonomic design for better posture',
                image: 'https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=600&h=600&fit=crop&auto=format&q=80'
            },
            {
                id: 5,
                name: 'USB-C Hub',
                price: 79.99,
                description: 'Connect all your devices with ease',
                image: 'https://images.unsplash.com/photo-1625948515291-69613efd103f?w=600&h=600&fit=crop&auto=format&q=80'
            },
            {
                id: 6,
                name: 'Mechanical Keyboard',
                price: 129.99,
                description: 'Premium typing experience',
                image: 'https://images.unsplash.com/photo-1595225476474-87563907a212?w=600&h=600&fit=crop&auto=format&q=80'
            }
        ];

        // Render products with lazy loading
        function renderProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = products.map(product => `
                <div class="product-card" onclick="window.location.href='product.html?id=${product.id}'">
                    <img 
                        src="${product.image}" 
                        alt="${product.name}" 
                        class="product-image"
                        loading="lazy"
                        decoding="async"
                        width="280"
                        height="280"
                    >
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">$${product.price.toFixed(2)}</p>
                        <p class="product-description">${product.description}</p>
                        <button class="add-to-cart-btn" onclick="event.stopPropagation(); quickAddToCart(${product.id})">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Quick add to cart
        function quickAddToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const cartItem = {
                productId: product.id,
                name: product.name,
                price: product.price,
                quantity: 1,
                color: 'Black',
                size: 'One Size',
                image: product.image
            };

            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingIndex = cart.findIndex(item => item.productId === productId);

            if (existingIndex > -1) {
                cart[existingIndex].quantity++;
            } else {
                cart.push(cartItem);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            
            // Visual feedback
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'âœ“ Added!';
            btn.style.background = '#27ae60';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '#3498db';
            }, 1500);
        }

        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        // Initialize
        renderProducts();
        updateCartCount();

        // Firebase auth check (deferred)
        window.addEventListener('load', () => {
            if (typeof firebase !== 'undefined') {
                const firebaseConfig = {
                    apiKey: "AIzaSyD1ccRiAIz_MYh6lv3u-gliWtHSBqS3zQs",
                    authDomain: "ecommerce-3a30f.firebaseapp.com",
                    projectId: "ecommerce-3a30f",
                    storageBucket: "ecommerce-3a30f.firebasestorage.app",
                    messagingSenderId: "526024768102",
                    appId: "1:526024768102:web:d408b83d034e8d912a4ba7"
                };
                
                firebase.initializeApp(firebaseConfig);
                firebase.auth().onAuthStateChanged(user => {
                    if (user) {
                        const navLinks = document.querySelector('.nav-links');
                        navLinks.innerHTML += `<li><a href="#" onclick="firebase.auth().signOut()">Logout</a></li>`;
                    }
                });
            }
        });

        // Service Worker for caching (optional - uncomment to enable)
        /*
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
        */
    </script>
</body>
</html>
